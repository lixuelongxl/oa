<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.core136.mapper.sys.SysLogMapper">
<resultMap id="SysLog" type="com.core136.bean.sys.SysLog" >
    <id column="ID" property="id" jdbcType="BIGINT" />
    <result column="LOG_ID" property="logId" jdbcType="VARCHAR" />
    <result column="ACCOUNT_ID" property="accountId" jdbcType="VARCHAR" />
    <result column="EVENT_TYPE" property="eventType" jdbcType="VARCHAR" />
    <result column="IP" property="ip" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="VARCHAR" />
    <result column="ORG_ID" property="orgId" jdbcType="VARCHAR" />
  </resultMap>
<select id="getSysLogList" resultType="java.util.HashMap">
SELECT S.ID AS id,S.EVENT_TYPE AS eventType,S.IP AS ip,S.REMARK AS remark,S.CREATE_TIME AS createTime,
(SELECT U.USER_NAME FROM USER_INFO U WHERE U.ORG_ID=S.ORG_ID AND U.ACCOUNT_ID=S.ACCOUNT_ID) AS createUserName
	FROM SYS_LOG S 
WHERE ORG_ID=#{orgId}
	<if test="accountId!=''.toString() and accountId !=null">
		AND S.ACCOUNT_ID=#{accountId}
	</if>
	<if test="eventType!=''.toString() and eventType !=null">
		AND S.EVENT_TYPE=#{eventType}
	</if>
	
	<if test = "beginTime!=''.toString() and beginTime!=null">
		AND S.CREATE_TIME &gt;=#{beginTime}
	</if>
	<if test = "endTime!=''.toString() and endTime!=null">
		AND S.CREATE_TIME &lt;=#{endTime}
	</if>
	<if test="search !='%%' and search !=''.toString() and search!=null">
		AND S.REMARK LIKE #{search}
	</if>
</select>


</mapper>

