<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.core136.mapper.platform.PlatformMenuMapper">
<resultMap id="PlatformMenu" type="com.core136.bean.platform.PlatformMenu" >
    <id column="ID" property="id" jdbcType="BIGINT" />
    <result column="MENU_ID" property="menuId" jdbcType="VARCHAR" />
    <result column="SORT_NO" property="sortNo" jdbcType="INTEGER" />
    <result column="MENU_NAME" property="menuName" jdbcType="VARCHAR" />
    <result column="PAGE_ID" property="pageId" jdbcType="VARCHAR" />
    <result column="APP_CODE" property="appCode" jdbcType="VARCHAR" />
    <result column="LEVEL_ID" property="levelId" jdbcType="VARCHAR" />
    <result column="MENU_PIC" property="menuPic" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="CREATE_USER" property="createUser" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="VARCHAR" />
    <result column="ORG_ID" property="orgId" jdbcType="VARCHAR" />
  </resultMap>

<select id="getPlatformMenuTree" resultType="java.util.HashMap">
SELECT MENU_ID AS menuId, MENU_NAME AS menuName,
CASE WHEN (SELECT COUNT(1) FROM PLATFORM_MENU TMP WHERE TMP.LEVEL_ID=menuId)=0 then 'false' else 'true' END
AS  isParent
FROM PLATFORM_MENU WHERE LEVEL_ID=#{levelId} AND ORG_ID=#{orgId}
</select>

<select id="isExistChild" resultType="Integer">
SELECT COUNT(1) AS ZS FROM PLATFORM_MENU WHERE levelId=#{levelId} AND ORG_ID=#{orgId}
</select>




</mapper>

